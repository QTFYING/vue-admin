# 客户端接入支付方式

## 链式调用（Fluent API） - 推荐

SDK内部在设计`register`方法时，已经特意将this返回，所以可以用这种很优雅的调用方式。这也是SDK期望你使用的方式。

```js
import { PaymentContext } from './src/core/PaymentContext';
import { WechatStrategy } from './src/strategies/WechatStrategy';
import { AlipayStrategy } from './src/strategies/AlipayStrategy';
import { UnionPayStrategy } from './src/strategies/UnionPayStrategy'; // 假设你有这个

const cashier = new PaymentContext({ ... });

// 就像 jQuery 或 Promise 一样点下去
cashier
  .register(new WechatStrategy({ appId: 'wx888' }))
  .register(new AlipayStrategy({ appId: 'ali999' }))
  .register(new UnionPayStrategy({ appId: 'up777' }));
```

## 数组遍历 (Configuration Driven)

如果你的渠道配置是在一个配置文件（Config File）里，或者你想把实例化逻辑抽离出来，这种写法最干净。

```js
// config/strategies.ts
const strategies = [
  new WechatStrategy({ appId: 'wx888' }),
  new AlipayStrategy({ appId: 'ali999' }),
  new UnionPayStrategy({ appId: 'up777' })
];

// main.ts
const cashier = new PaymentContext({ ... });

// 一次性注册
strategies.forEach(strategy => cashier.register(strategy));
```
